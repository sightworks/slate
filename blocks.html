<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>BrandLX - Blocks</title>

    <link href="stylesheets/screen.css" rel="stylesheet" type="text/css" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" type="text/css" media="print" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
      <script src="javascripts/all.js" type="text/javascript"></script>

      <script>
        $(function() {
          setupLanguages(["javascript"]);
        });
      </script>
  </head>

  <body class="blocks">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" />
      </span>
    </a>
    <div class="tocify-wrapper">
      <img src="images/logo.png" />
        <div class="lang-selector">
              <a href="#" data-language-name="javascript">javascript</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <div id="toc">
      </div>
        <ul class="toc-footer">
            <li><!-- <a href='http://github.com/tripit/slate'>Documentation Powered by Slate</a>--> &copy; 2016 SightWorks</li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        
          <h1 id="block-types">Block Types</h1>

<h2 id="general-block-properties">General Block Properties</h2>
<pre class="highlight javascript"><code><span class="p">({</span>
    <span class="na">title</span><span class="p">:</span> <span class="s2">"String"</span><span class="p">,</span>
    <span class="na">displayTitle</span><span class="p">:</span> <span class="s2">"String"</span>
<span class="p">})</span>
</code></pre>

<p>All blocks have the properties defined here.</p>

<table><thead>
<tr>
<th>Property</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">title</code></td>
<td>String</td>
<td>The name of the block as you&rsquo;ll use it in the code.</td>
</tr>
<tr>
<td><code class="prettyprint">displayTitle</code></td>
<td>String</td>
<td>The name of the block as presented to the end user. If unspecified, uses the value of <code class="prettyprint">title</code>.</td>
</tr>
</tbody></table>

<p>In the value presented to the end user for the block title, having a <code class="prettyprint">/</code> (forward slash) in the
name causes the system to generate a tree structure to the block instead of presenting it as a flat
list.</p>

<h2 id="text">Text</h2>
<pre class="highlight javascript"><code><span class="k">new</span> <span class="nx">Blocks</span><span class="p">.</span><span class="nx">Text</span><span class="p">({</span>
    <span class="na">title</span><span class="p">:</span> <span class="s2">"Text Block"</span><span class="p">,</span>
    <span class="na">multiLine</span><span class="p">:</span> <span class="kc">true</span>
<span class="p">});</span>
</code></pre>

<p>This creates a text block.</p>

<table><thead>
<tr>
<th>Property</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">multiLine</code></td>
<td>Boolean</td>
<td>Whether this field has multiple lines for user input or only one.</td>
</tr>
</tbody></table>

<p>Making a text field multi-line for the user does not automatically make the content present as multiple lines when rendering; if that is necessary, 
you&rsquo;ll have to replace <code class="prettyprint">\n</code> with <code class="prettyprint">&lt;br&gt;</code> or set styles to enforce that (such as <code class="prettyprint">white-space: pre-wrap;</code> in the element&rsquo;s styles).</p>

<h2 id="rawtext">RawText</h2>
<pre class="highlight javascript"><code><span class="k">new</span> <span class="nx">Blocks</span><span class="p">.</span><span class="nx">RawText</span><span class="p">({</span>
    <span class="na">title</span><span class="p">:</span> <span class="s2">"Text Block"</span><span class="p">,</span>
    <span class="na">multiLine</span><span class="p">:</span> <span class="kc">true</span>
<span class="p">});</span>
</code></pre>

<p>This creates a text block. The contents of this block will not automatically have HTML control characters escaped when it&rsquo;s value is called.</p>

<table><thead>
<tr>
<th>Property</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">multiLine</code></td>
<td>Boolean</td>
<td>Whether this field has multiple lines for user input or only one.</td>
</tr>
</tbody></table>

<h2 id="html">HTML</h2>
<pre class="highlight javascript"><code><span class="k">new</span> <span class="nx">Blocks</span><span class="p">.</span><span class="nx">HTML</span><span class="p">({</span>
    <span class="na">title</span><span class="p">:</span> <span class="s1">'HTML block'</span><span class="p">,</span>
    <span class="na">asEmbedCode</span><span class="p">:</span> <span class="kc">false</span>
<span class="p">});</span>
</code></pre>

<p>This creates an HTML input field.</p>

<table><thead>
<tr>
<th>Property</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">asEmbedCode</code></td>
<td>Boolean</td>
<td>Whether this field contains HTML to be edited via a WYSIWYG editor or raw HTML for presentation to the end user.</td>
</tr>
</tbody></table>

<p>The difference between <code class="prettyprint">new Blocks.RawText({ multiLine: true })</code> and <code class="prettyprint">new Blocks.HTML({ asEmbedCode: true })</code> is minimal, but intended
to state that the former is arbitrary text which may be used programatically, where the latter is still HTML to be sent to the user of the
website containing this block.</p>

<h2 id="link">Link</h2>
<pre class="highlight javascript"><code><span class="k">new</span> <span class="nx">Blocks</span><span class="p">.</span><span class="nx">Link</span><span class="p">({</span>
    <span class="na">title</span><span class="p">:</span> <span class="s1">'Link title'</span>
<span class="p">});</span>
</code></pre>

<p>This creates a link container. There are no custom properties.</p>

<h2 id="image">Image</h2>
<pre class="highlight javascript"><code><span class="k">new</span> <span class="nx">Blocks</span><span class="p">.</span><span class="nx">Image</span><span class="p">({</span>
    <span class="na">title</span><span class="p">:</span> <span class="s1">'Image Block'</span><span class="p">,</span>
    <span class="na">useS3</span><span class="p">:</span> <span class="kc">false</span>
<span class="p">});</span>
</code></pre>

<p>This creates an image block. The system will not allow a non-image file to be selected for this field.</p>

<table><thead>
<tr>
<th>Property</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">useS3</code></td>
<td>Boolean</td>
<td>Use an Amazon S3 bucket (configured elsewhere) for storing files uploaded into this block.</td>
</tr>
</tbody></table>

<h2 id="document">Document</h2>
<pre class="highlight javascript"><code><span class="k">new</span> <span class="nx">Blocks</span><span class="p">.</span><span class="nx">Document</span><span class="p">({</span>
    <span class="na">title</span><span class="p">:</span> <span class="s1">'Document Block'</span><span class="p">,</span>
    <span class="na">useS3</span><span class="p">:</span> <span class="kc">false</span>
<span class="p">});</span>
</code></pre>

<p>This creates a reference to an arbitrary document. This may be an image but is not restricted to being only
an image.</p>

<table><thead>
<tr>
<th>Property</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">useS3</code></td>
<td>Boolean</td>
<td>Use an Amazon S3 bucket (configured elsewhere) for storing files uploaded into this block.</td>
</tr>
</tbody></table>

<h2 id="appgroup">AppGroup</h2>
<pre class="highlight javascript"><code><span class="k">new</span> <span class="nx">Blocks</span><span class="p">.</span><span class="nx">AppGroup</span><span class="p">({</span>
    <span class="na">title</span><span class="p">:</span> <span class="s1">'App Group Block'</span><span class="p">,</span>
    <span class="na">app</span><span class="p">:</span> <span class="s1">'APP_ID'</span><span class="p">,</span>
    <span class="na">group</span><span class="p">:</span> <span class="s1">'GROUP_ID'</span><span class="p">,</span>
    <span class="na">create</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="na">mode</span><span class="p">:</span> <span class="s1">'list'</span>
<span class="p">});</span>
</code></pre>

<p>This allows you to specify a group of records.</p>

<table><thead>
<tr>
<th>Property</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">app</code></td>
<td>String</td>
<td>The app ID holding the group to select. (This is the value of the <code class="prettyprint">APP_ID</code> const in the app definition under <code class="prettyprint">/apps/</code>.)</td>
</tr>
<tr>
<td><code class="prettyprint">group</code></td>
<td>String or Object</td>
<td>The group to be selected. See below for more details.</td>
</tr>
<tr>
<td><code class="prettyprint">create</code></td>
<td>Boolean</td>
<td>Whether to create a group if the desired group does not exist.</td>
</tr>
<tr>
<td><code class="prettyprint">fromURL</code></td>
<td>Boolean</td>
<td>If the selected group is actually chosen as a result of being linked through the page URL instead of being coded by the developer.</td>
</tr>
<tr>
<td><code class="prettyprint">userSelect</code></td>
<td>Boolean</td>
<td>If the selected group is directly selected by the site administrator.</td>
</tr>
<tr>
<td><code class="prettyprint">mode</code></td>
<td>String</td>
<td>The way the group should be presented to the site administrator. One of <code class="prettyprint">tree</code> (full group tree rooted at the selected group), <code class="prettyprint">list</code> (list of records from the selected group) or <code class="prettyprint">object</code> (the group object itself).</td>
</tr>
<tr>
<td><code class="prettyprint">customSource</code></td>
<td>Function</td>
<td>A method which returns a Group object.</td>
</tr>
</tbody></table>

<p>To determine the group presented:</p>

<ul>
<li>Check <code class="prettyprint">customSource</code>. If it exists, the method is called. If it returns a Group object, the group is used.</li>
<li>Check <code class="prettyprint">fromURL</code>. If true, and the page we&rsquo;re looking at has a reference to a group in the specified app, that group is used.</li>
<li>Check <code class="prettyprint">userSelect</code>. If true, we use the group specified directly by the administrator.</li>
<li>Check <code class="prettyprint">group</code>. If <code class="prettyprint">group</code> is not null:

<ul>
<li>If <code class="prettyprint">group</code> is an object with a property <code class="prettyprint">stub</code>:
Look up a group with the value in it&rsquo;s <code class="prettyprint">stub</code> field matching the value in the <code class="prettyprint">group.stub</code> property. Use it if found.</li>
<li>If <code class="prettyprint">group</code> is a string:
Look up a group with the ID specified by the <code class="prettyprint">group</code> property. Use it if found.</li>
</ul></li>
<li>Check <code class="prettyprint">create</code>; if true:

<ul>
<li>Create a new group, using the block title and group identifier specified in the <code class="prettyprint">group</code> property and return it.</li>
</ul></li>
</ul>

<p>If <code class="prettyprint">userSelect</code> is true, <code class="prettyprint">mode</code> is ignored (when the end user can directly select the group, the editor presents the group selection instead of any views controlled
by <code class="prettyprint">mode</code>.)</p>

<h2 id="apprecord">AppRecord</h2>
<pre class="highlight javascript"><code><span class="k">new</span> <span class="nx">Blocks</span><span class="p">.</span><span class="nx">AppRecord</span><span class="p">({</span>
    <span class="na">title</span><span class="p">:</span> <span class="s1">'Record Block'</span><span class="p">,</span>
    <span class="na">app</span><span class="p">:</span> <span class="s1">'APP_ID'</span><span class="p">,</span>
    <span class="na">fromURL</span><span class="p">:</span> <span class="kc">true</span>
<span class="p">});</span>
</code></pre>

<p>This allows you to specify a record to display.</p>

<table><thead>
<tr>
<th>Property</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">app</code></td>
<td>String</td>
<td>The app ID holding the reciord to select. (This is the value of the <code class="prettyprint">APP_ID</code> const in the app definition under <code class="prettyprint">/apps/</code>.)</td>
</tr>
<tr>
<td><code class="prettyprint">fromURL</code></td>
<td>Boolean</td>
<td>Whether the record is specified by the page URL or not.</td>
</tr>
<tr>
<td><code class="prettyprint">userSelect</code></td>
<td>Boolean</td>
<td>Whether the record is specified by the user or not</td>
</tr>
<tr>
<td><code class="prettyprint">record</code></td>
<td>String</td>
<td>The record ID to be displayed.</td>
</tr>
</tbody></table>

<p>Record lookup:
* If <code class="prettyprint">fromURL</code> is true, check for a record from this app in the URL; if found, return it.
* If <code class="prettyprint">userSelect</code> is true, check for an explicit selection made by the administrator and return it if found.
* Otherwise, if <code class="prettyprint">record</code> is specified, return the record with that ID.</p>

<p>Specifying <code class="prettyprint">userSelect</code> will change the view from being that of the record being presented to a record selector in the editor.</p>

<h1 id="page-api">Page API</h1>

<h2 id="blocks-object">blocks():Object</h2>
<pre class="highlight javascript"><code><span class="nx">exports</span><span class="p">.</span><span class="nx">Pages</span><span class="p">[</span><span class="nx">PAGE_ID</span><span class="p">]</span> <span class="o">=</span> <span class="kr">class</span> <span class="kr">extends</span> <span class="nx">ParentLayout</span> <span class="p">{</span>
    <span class="nx">blocks</span><span class="p">()</span> <span class="p">{</span>
        <span class="kr">const</span> <span class="nx">Blocks</span> <span class="o">=</span> <span class="nx">exports</span><span class="p">.</span><span class="nx">Blocks</span><span class="p">;</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="na">title</span><span class="p">:</span> <span class="s2">"Object Title"</span><span class="p">,</span>
            <span class="na">content</span><span class="p">:</span> <span class="p">[</span>
                <span class="k">new</span> <span class="nx">Blocks</span><span class="p">.</span><span class="nx">Text</span><span class="p">({</span> <span class="na">title</span><span class="p">:</span> <span class="s1">'Page title'</span> <span class="p">})</span>
            <span class="p">]</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre>

<p>This is your mechanism for telling the system what blocks appear on the page. Define this method
in your pages returning an object as described here.</p>

<h2 id="storeblocks-void">storeBlocks():void</h2>
<pre class="highlight javascript"><code><span class="nx">page</span><span class="p">.</span><span class="nx">storeBlocks</span><span class="p">();</span>
</code></pre>

<p>This method creates the necessary structures in the Content Blocks app for the blocks defined here. In general, it is
automatically invoked by the system as necessary.</p>

<h2 id="get-pageid-string">get pageId():String</h2>
<pre class="highlight javascript"><code><span class="nx">page</span><span class="p">.</span><span class="nx">pageId</span>
</code></pre>

<p>This property holds the ID of the current page or layout. In general, it will be in the form of:
* <code class="prettyprint">BasePage</code>
* <code class="prettyprint">Layouts.&lt;Layout ID&gt;</code>
* <code class="prettyprint">Pages.&lt;Page ID&gt;</code></p>

<p>This is both an instance and static property (the instance property is there for ease of access; it simply
accesses <code class="prettyprint">this.constructor.pageId</code>.)</p>

<h2 id="get-parentpageid-string">get parentPageId():String</h2>
<pre class="highlight javascript"><code><span class="nx">page</span><span class="p">.</span><span class="nx">parentPageId</span>
</code></pre>

<p>This property holds the ID of the parent layout. The values are the same as for <code class="prettyprint">pageId</code>.</p>

<h2 id="block-name-string-block">block(name:String):Block</h2>
<pre class="highlight javascript"><code><span class="nx">exports</span><span class="p">.</span><span class="nx">Pages</span><span class="p">[</span><span class="nx">PAGE_ID</span><span class="p">]</span> <span class="o">=</span> <span class="kr">class</span> <span class="kr">extends</span> <span class="nx">ParentLayout</span> <span class="p">{</span>
    <span class="nx">blocks</span><span class="p">()</span> <span class="p">{</span>
        <span class="kr">const</span> <span class="nx">Blocks</span> <span class="o">=</span> <span class="nx">exports</span><span class="p">.</span><span class="nx">Blocks</span><span class="p">;</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="na">title</span><span class="p">:</span> <span class="s2">"Object Title"</span><span class="p">,</span>
            <span class="na">content</span><span class="p">:</span> <span class="p">[</span>
                <span class="k">new</span> <span class="nx">Blocks</span><span class="p">.</span><span class="nx">Text</span><span class="p">({</span> <span class="na">title</span><span class="p">:</span> <span class="s1">'Page title'</span> <span class="p">})</span>
            <span class="p">]</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="nx">renderSomeContent</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="err">`</span>
            <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="nx">p</span><span class="o">&gt;</span><span class="nx">$</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">block</span><span class="p">(</span><span class="s2">"Page title"</span><span class="p">).</span><span class="nx">resolve</span><span class="p">()}</span><span class="o">&lt;</span><span class="sr">/p</span><span class="err">&gt;
</span>            <span class="o">&lt;</span><span class="sr">/div</span><span class="err">&gt;
</span>        <span class="err">`</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre>

<p>From within a page object, <code class="prettyprint">block(name)</code> retrieves the instance of the content block from the page.</p>

<h2 id="block-pageid-string-name-string-block">block(pageId:String, name:String):Block</h2>
<pre class="highlight javascript"><code><span class="nx">exports</span><span class="p">.</span><span class="nx">Layouts</span><span class="p">[</span><span class="nx">Layout_ID</span><span class="p">]</span> <span class="o">=</span> <span class="kr">class</span> <span class="kr">extends</span> <span class="nx">ParentLayout</span> <span class="p">{</span>
    <span class="nx">blocks</span><span class="p">()</span> <span class="p">{</span>
        <span class="kr">const</span> <span class="nx">Blocks</span> <span class="o">=</span> <span class="nx">exports</span><span class="p">.</span><span class="nx">Blocks</span><span class="p">;</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="na">title</span><span class="p">:</span> <span class="s2">"Layout Title"</span><span class="p">,</span>
            <span class="na">content</span><span class="p">:</span> <span class="p">[</span>
                <span class="k">new</span> <span class="nx">Blocks</span><span class="p">.</span><span class="nx">Text</span><span class="p">({</span> <span class="na">title</span><span class="p">:</span> <span class="s1">'Layout text'</span> <span class="p">})</span>
            <span class="p">]</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="nx">renderSomeContent</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="err">`</span>
            <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="nx">p</span><span class="o">&gt;</span><span class="nx">$</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">block</span><span class="p">(</span><span class="err">`</span><span class="nx">Layouts</span><span class="p">.</span><span class="nx">$</span><span class="p">{</span><span class="nx">LAYOUT_ID</span><span class="p">}</span><span class="err">`</span><span class="p">,</span> <span class="s2">"Layout text"</span><span class="p">).</span><span class="nx">resolve</span><span class="p">()}</span><span class="o">&lt;</span><span class="sr">/p</span><span class="err">&gt;
</span>            <span class="o">&lt;</span><span class="sr">/div</span><span class="err">&gt;
</span>        <span class="err">`</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre>

<p>This retrieves the named block for the specified layout. The first argument will be typically
something of the form: <code class="prettyprint">&quot;Layouts.&quot; + LAYOUT_ID</code> or similar, since the code cannot determine
exactly where in scope the block() method is being called from.</p>

<h2 id="blockfrompage-pageid-string-blockname-string-block">blockFromPage(pageId:String, blockName:String):Block</h2>
<pre class="highlight javascript"><code><span class="k">this</span><span class="p">.</span><span class="nx">blockFromPage</span><span class="p">(</span><span class="s1">'Home'</span><span class="p">,</span> <span class="s1">'Some List'</span><span class="p">)</span>
</code></pre>

<p>Retrieve the named block from the page with the specified ID.</p>

<h2 id="blockfromlayout-layoutid-string-blockname-string-block">blockFromLayout(layoutId:String, blockName:String):Block</h2>
<pre class="highlight javascript"><code><span class="k">this</span><span class="p">.</span><span class="nx">blockFromLayout</span><span class="p">(</span><span class="s2">"MainLayout"</span><span class="p">,</span> <span class="s2">"Some List"</span><span class="p">)</span>
</code></pre>

<p>Retrieve the named block from the layout with the specified ID.</p>

<h2 id="getspecificblock-pageclass-page-blockname-string-block">getSpecificBlock(pageClass:Page, blockName:String):Block</h2>
<pre class="highlight javascript"><code><span class="k">this</span><span class="p">.</span><span class="nx">getSpecificBlock</span><span class="p">(</span><span class="nx">exports</span><span class="p">.</span><span class="nx">Pages</span><span class="p">.</span><span class="nx">Home</span><span class="p">,</span> <span class="s2">"Some List"</span><span class="p">)</span>
</code></pre>

<p>This is used behind the scenes by <code class="prettyprint">blockFromPage</code> and <code class="prettyprint">blockFromLayout</code>.</p>

<h1 id="block-api">Block API</h1>

<h2 id="get-blocktype-string">get blockType():String</h2>
<pre class="highlight javascript"><code><span class="nx">block</span><span class="p">.</span><span class="nx">blockType</span>
</code></pre>

<p>Retrieve the type of the block. This is the name of one of the block type constructors above.</p>

<h2 id="get-blockid-string">get blockId():String</h2>
<pre class="highlight javascript"><code><span class="nx">block</span><span class="p">.</span><span class="nx">blockId</span>
</code></pre>

<p>Retrieve the ID of the block as used in the Content Blocks app.</p>

<h2 id="get-defaultcontentobject-object">get defaultContentObject():Object</h2>
<pre class="highlight javascript"><code><span class="nx">block</span><span class="p">.</span><span class="nx">defaultContentObject</span>
</code></pre>

<p>Retrieve the data used by the blocks API for a default version of this boject.</p>

<h2 id="save-void">save():void</h2>
<pre class="highlight javascript"><code><span class="nx">block</span><span class="p">.</span><span class="nx">save</span><span class="p">()</span>
</code></pre>

<p>Save this block into the Content Blocks app. This creates the initial instance of the block and updates it&rsquo;s title if needed.</p>

<p>In general, the system will do this for you.</p>

<h2 id="get-block-record">get block():Record</h2>
<pre class="highlight javascript"><code><span class="nx">block</span><span class="p">.</span><span class="nx">block</span>
</code></pre>

<p>Retrieve the underlying block record. This might be null if the content block object itself has no need of a backing store.</p>

<h2 id="preprocess-content-string-string">preprocess(content:String):String</h2>
<pre class="highlight javascript"><code><span class="nx">block</span><span class="p">.</span><span class="nx">preprocess</span><span class="p">(</span><span class="err">`</span>
    <span class="nx">My</span> <span class="nx">text</span>

    <span class="nx">It</span> <span class="nx">has</span> <span class="nx">multiple</span> <span class="nx">lines</span> <span class="kd">with</span> <span class="nx">some</span> <span class="nx">prefix</span> <span class="nx">indentation</span><span class="p">.</span>
<span class="err">`</span><span class="p">);</span>
</code></pre>

<p>This method removes the following from a string passed:
* Leading whitespace from all lines in the string.
* An empty line at the beginning of the string.
* An empty line at the end of the string.</p>

<h2 id="resolve-defaultcontent-any-any">resolve(defaultContent:Any):Any</h2>
<pre class="highlight javascript"><code><span class="nx">block</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="err">`</span>
    <span class="nx">My</span> <span class="nx">Text</span>
<span class="err">`</span><span class="p">);</span>
</code></pre>

<p>This determines the content that should appear in the block and returns it.</p>

<p>The acceptable values for defaultContent and the return value vary based on the block type:
* Text: The argument is the text to be used, without HTML encoding. The result is always HTML encoded text.
* RawText, HTML: The argument and the result are a string containing text.
* Link: The argument and result is an object containing <code class="prettyprint">link</code> and <code class="prettyprint">title</code> properties, which are the default URL and title to be used for the link.
* Image, Document: The argument is the path to a file to be used by default. The result is a fully-specified URL to the file.
* AppGroup, AppRecord: The argument is unused; the result is a Group or Record respectively.</p>

<h2 id="process-callback-content-any-any-defaultcontent-any-any">process(callback:(content:Any):Any, defaultContent:Any):Any</h2>
<pre class="highlight javascript"><code><span class="nx">block</span><span class="p">.</span><span class="nx">process</span><span class="p">(</span><span class="nx">value</span> <span class="o">=&gt;</span> <span class="nx">value</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s2">"\n"</span><span class="p">).</span><span class="nx">join</span><span class="p">(</span><span class="s2">"&lt;br&gt;"</span><span class="p">),</span> <span class="err">`</span>
    <span class="nx">This</span> <span class="nx">is</span> <span class="nx">some</span> <span class="nx">text</span>

    <span class="kd">with</span> <span class="nx">multiple</span> <span class="nx">lines</span>
<span class="err">`</span><span class="p">)</span>
</code></pre>

<p>This works the same way as <code class="prettyprint">block.resolve()</code> but instead of returning the content, passes it to
the provided callback function and returns it&rsquo;s value instead.</p>

<h2 id="tojson-object">toJSON():Object</h2>
<pre class="highlight javascript"><code><span class="nx">block</span><span class="p">.</span><span class="nx">toJSON</span><span class="p">()</span>
</code></pre>

<p>Retrieves the user-visible properties of the block.</p>

<h2 id="get-image-s3-boolean-get-document-s3-boolean">get Image.S3():Boolean, get Document.S3():Boolean</h2>
<pre class="highlight javascript"><code><span class="nx">block</span><span class="p">.</span><span class="nx">S3</span>
</code></pre>

<p>If the block is an Image or Document and it&rsquo;s contents are to be stored in Amazon S3, this is true.</p>

<h2 id="get-nosave">get noSave()</h2>
<pre class="highlight javascript"><code><span class="nx">block</span><span class="p">.</span><span class="nx">noSave</span>
</code></pre>

<p>If this property is true, the block has no backing store and will not appear in the Content Blocks app.</p>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="javascript">javascript</a>
          </div>
      </div>
    </div>
  </body>
</html>
